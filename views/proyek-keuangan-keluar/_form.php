<?php

/**
 * Autogenerated From GII
 * modified by Defri Indra M
 * 2021
 */

use yii\helpers\Html;
use app\components\annex\ActiveForm;
use \app\components\annex\Tabs;

/**
 * @var yii\web\View $this
 * @var app\models\ProyekKeuanganKeluar $model
 * @var app\components\annex\ActiveForm $form
 */

// $model->tipe = 1;
?>

<?php $form = ActiveForm::begin([
    'action' => \yii\helpers\Url::current(["id_project" => $model->id_proyek]),
    'id' => 'ProyekKeuanganKeluar',
    'layout' => 'horizontal',
    'enableClientValidation' => true,
    'errorSummaryCssClass' => 'error-summary alert alert-error'
]);

?>
<?php echo $form->errorSummary($model); ?>

<div class="clearfix"></div>
<div class="d-flex  flex-wrap">

    <?= $form->field($model, 'id_proyek', ['template' => '{input}'])->hiddenInput()->label(); ?>
    <?php if ($model->tipe == 1) : ?>
        <?= $form->field($model, 'no_po', \app\components\Constant::COLUMN(4))->textInput(['maxlength' => true]) ?>
        <?= $form->field($model, 'dokumen_po', \app\components\Constant::COLUMN(4))->fileInput(['accept' => 'application/pdf']) ?>
    <?php endif ?>
    <?= $form->field($model, 'no_invoice', \app\components\Constant::COLUMN($model->tipe == 1 ? 4 : 3))->textInput(['maxlength' => true]) ?>
    <?= $form->field($model, 'vendor', \app\components\Constant::COLUMN($model->tipe == 1 ? 4 : 3))->textInput(['maxlength' => true]) ?>
    <?= $form->field($model, 'id_kategori', \app\components\Constant::COLUMN($model->tipe == 1 ? 3 : 3))->widget(\kartik\select2\Select2::classname(), [
        'name' => 'class_name',
        'model' => $model,
        'attribute' => 'id_kategori',
        'data' => \yii\helpers\ArrayHelper::map(app\models\MasterKategoriKeuanganKeluar::find()->where(['id_proyek' => $model->id_proyek])->all(), 'id', 'nama_kategori'),
        'options' => [
            'placeholder' => $model->getAttributeLabel('id_kategori'),
            'multiple' => false,
            'disabled' => (isset($relAttributes) && isset($relAttributes['id_kategori'])),
        ]
    ]); ?>
    <?= $form->field($model, 'tanggal', \app\components\Constant::COLUMN($model->tipe == 1 ? 3 : 2))->textInput(['type' => 'date']) ?>
    <?= $form->field($model, 'keterangan', \app\components\Constant::COLUMN($model->tipe == 1 ? 3 : 2))->textarea(['rows' => 1]) ?>
    <div class="clearfix"></div>
    <div style="padding: 0 2rem" class="table-responsive">
        <?= $this->render('_form_detail', array_merge($model->render(), ['form' => $form])) ?>
    </div>
</div>
<hr />
<div class="row">
    <div class="col-md-offset-3 col-md-10">
        <?= Html::submitButton('<i class="fa fa-save"></i> Simpan', ['class' => 'btn btn-success']); ?>
    </div>
</div>
<?php ActiveForm::end(); ?>