<?php
/**
 * Autogenerated From GII
 * modified by Defri Indra M
 * 2021
 */

use yii\helpers\Html;
use app\components\annex\ActiveForm;
use \app\components\annex\Tabs;
use kartik\depdrop\DepDrop;

/**
* @var yii\web\View $this
* @var app\models\HargaMaterial $model
* @var app\components\annex\ActiveForm $form
*/

?>

<?php $form = ActiveForm::begin([
    'id' => 'HargaMaterial',
    'layout' => 'horizontal',
    'enableClientValidation' => true,
    'errorSummaryCssClass' => 'error-summary alert alert-error'
]);
?>
<?php echo $form->errorSummary($model); ?>

<div class="clearfix"></div>
<div class="d-flex  flex-wrap">

<?=         // modified by Defri Indra
        $form->field($model, 'id_provinsi', \app\components\Constant::COLUMN())->widget(\kartik\select2\Select2::classname(), [
            'name' => 'class_name',
            'model' => $model,
            'data' => \yii\helpers\ArrayHelper::map(app\models\WilayahProvinsi::find()->all(), 'id', 'nama'),
            'options' => [
                'placeholder' => $model->getAttributeLabel('id_provinsi'),
                'multiple' => false,
                'disabled' => (isset($relAttributes) && isset($relAttributes['id_provinsi'])),
            ]
        ]); ?>

<?= yii\helpers\Html::hiddenInput('selected_kota', ($model->isNewRecord) ? '' : $model->id_provinsi, ['id' => 'selected_kota']) ?>
	<?=         // modified by Defri Indra
        $form->field($model, 'id_kota', \app\components\Constant::COLUMN())->widget(\kartik\depdrop\DepDrop::class, [
            'type' => DepDrop::TYPE_SELECT2,
            'options'=>['id'=>'hargamaterial-id_kota'],
            'pluginOptions'=>[
                'depends'=>['hargamaterial-id_provinsi'],
                'placeholder'=>'Pilih...',
                'url'=>yii\helpers\Url::to(['/site/get-kota']),
                'initialize' => ($model->isNewRecord) ? false : true,
                'params'=>['selected_kota']
            ]
        ]) ?>
	<?=         // modified by Defri Indra
        $form->field($model, 'id_material', \app\components\Constant::COLUMN())->widget(\kartik\select2\Select2::classname(), [
            'name' => 'class_name',
            'model' => $model,
            'attribute' => 'id_material',
            'data' => \yii\helpers\ArrayHelper::map(app\models\MasterMaterial::find()->all(), 'id', 'nama'),
            'options' => [
                'placeholder' => $model->getAttributeLabel('id_material'),
                'multiple' => false,
                'disabled' => (isset($relAttributes) && isset($relAttributes['id_material'])),
            ]
        ]); ?>
	<?=         // modified by Defri Indra
        $form->field($model, 'id_supplier', \app\components\Constant::COLUMN())->widget(\kartik\select2\Select2::classname(), [
            'name' => 'class_name',
            'model' => $model,
            'attribute' => 'id_supplier',
            'data' => \yii\helpers\ArrayHelper::map(app\models\Supplier::find()->all(), 'id', 'nama_supplier'),
            'options' => [
                'placeholder' => $model->getAttributeLabel('id_supplier'),
                'multiple' => false,
                'disabled' => (isset($relAttributes) && isset($relAttributes['id_supplier'])),
            ]
        ]); ?>
	<?= $form->field($model, 'harga', \app\components\Constant::COLUMN())->widget(\yii\widgets\MaskedInput::className(), [
            'name' => 'harga',
            'clientOptions' => [
                'alias' =>  'decimal',
                'groupSeparator' => ',',
                'autoGroup' => true
            ],

        ]) ?>
    <div class="clearfix"></div>
</div>
<hr/>
<div class="row">
    <div class="col-md-offset-3 col-md-10">
        <?=  Html::submitButton('<i class="fa fa-save"></i> Simpan', ['class' => 'btn btn-success']); ?>
        <?=  Html::a('<i class="fa fa-chevron-left"></i> Kembali', ['index'], ['class' => 'btn btn-default']) ?>
    </div>
</div>
<?php ActiveForm::end(); ?>