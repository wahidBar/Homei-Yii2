<?php

/**
 * Autogenerated From GII
 * modified by Defri Indra M
 * 2021
 */

use yii\helpers\Html;
use app\components\annex\ActiveForm;
use \app\components\annex\Tabs;
use app\components\Constant;
use kartik\depdrop\DepDrop;

/**
 * @var yii\web\View $this
 * @var app\models\IsianLanjutan $model
 * @var app\components\annex\ActiveForm $form
 */

?>
<?php
$setting = \app\models\SiteSetting::find()->all();
$this->registerCssFile("@web/homepage/css/profile.css");
$this->registerCss("

.overlay {
    position:absolute;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.4);
}
.profile-img {
    border-radius: 50%;height: 100px;width: 100px;
}
");
?>
<!-- Navigation -->
<section class="navigation">
    <div class="parallax parallax--nav" style="background-image: url(<?= \Yii::$app->request->baseUrl . "/uploads/" . $setting[0]['gambar_header'] ?>);">
        <div class="overlay"></div>
        <div class="container clearfix">
            <div class="row">
                <div class="col-12">
                    <h2>
                        <?= $setting[0]['tagline']; ?>
                    </h2>
                </div>
                <div class="col-12">
                    <p>
                        <?= $setting[0]['tagline2']; ?>
                    </p>
                </div>
                <div class="col-12">
                    <ul class="breadcrumbs ul--inline ul--no-style">
                        <li>
                            <a href="<?= \Yii::$app->request->BaseUrl ?>/home">Home</a>
                        </li>
                        <span>/</span>
                        <li class="active">
                            <a href="<?= \Yii::$app->request->BaseUrl ?>/home/profile">Profil</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Navigation -->
<!-- Contact content -->
<section class="contact-content">
    <div class="page-content page-container" id="page-content">
        <!-- display success message -->
        <?php if (Yii::$app->session->hasFlash('success')) : ?>
            <div class="alert alert-success alert-dismissable">
                <button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
                <p><i class="icon fa fa-check"></i>Saved!</p>
                <?= Yii::$app->session->getFlash('success') ?>
            </div>
        <?php endif; ?>

        <!-- display error message -->
        <?php if (Yii::$app->session->hasFlash('error')) : ?>
            <div class="alert alert-danger alert-dismissable">
                <button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
                <h4><i class="icon fa fa-check"></i>Error!</h4>
                <?= Yii::$app->session->getFlash('error') ?>
            </div>
        <?php endif; ?>
        <div class="">
            <div class="row container d-flex justify-content-center mx-auto">
                <div class="col-xl-12 col-md-12">
                    <div class="card user-card-full">
                        <div class="row m-l-0 m-r-0">
                            <div class="col-sm-4 bg-c-lite-green user-profile">
                                <div class="card-block text-center text-white">
                                    <div class="mt-5">
                                        <?php
                                        if (Yii::$app->user->identity->photo_url != null) :
                                            echo Html::img(Yii::$app->formatter->asMyImage($model->photo_url, false, Constant::DEFAULT_IMAGE), ["class" => "img-radius profile-img", "width" => "200px"]);
                                        else :
                                            echo Html::img(Constant::DEFAULT_IMAGE, ["class" => "img-radius profile-img", "width" => "200px"]);
                                        endif;
                                        ?>
                                    </div>
                                    <p class="f-w-600 mt-3 text-dark" style="font-size: 1.5rem;"><?= $model->name ?></p>
                                    <p class="text-dark" style="font-size: 1rem;"><?= $model->email ?></p> <i class=" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"></i>
                                </div>
                            </div>
                            <div class="col-sm-8">
                                <div class="card-block">
                                    <h6 class="m-b-20 p-b-5 b-b-default f-w-600">Edit Profil</h6>
                                    <?php $form = ActiveForm::begin([
                                        'id' => 'user',
                                        'layout' => 'horizontal',
                                        'enableClientValidation' => true,
                                        'errorSummaryCssClass' => 'error-summary alert alert-error',
                                        'enableClientScript' => false,
                                    ]);
                                    ?>
                                    <?php echo $form->errorSummary($model); ?>

                                    <div class="row">
                                        <div class="col-md-6 col-12">
                                            <?= $form->field(
                                                $model,
                                                'name',
                                                [
                                                    'template' => '
                                                        {label}
                                                        {input}
                                                        {error}
                                                    ',
                                                    'inputOptions' => [
                                                        'class' => 'form-control'
                                                    ],
                                                    'labelOptions' => [
                                                        'class' => 'control-label'
                                                    ],
                                                    'options' => ['tag' => false]
                                                ]
                                            )->textInput(['maxlength' => true]) ?>
                                        </div>
                                        <div class="col-md-6 col-12">
                                            <?= $form->field(
                                                $model,
                                                'email',
                                                [
                                                    'template' => '
                                                        {label}
                                                        {input}
                                                        {error}
                                                    ',
                                                    'inputOptions' => [
                                                        'class' => 'form-control'
                                                    ],
                                                    'labelOptions' => [
                                                        'class' => 'control-label'
                                                    ],
                                                    'options' => ['tag' => false]
                                                ]
                                            )->textInput(['maxlength' => true, 'type' => 'email']) ?>
                                        </div>
                                        <div class="col-md-6 col-12">
                                            <?= $form->field(
                                                $model,
                                                'username',
                                                [
                                                    'template' => '
                                                        {label}
                                                        {input}
                                                        {error}
                                                    ',
                                                    'inputOptions' => [
                                                        'class' => 'form-control'
                                                    ],
                                                    'labelOptions' => [
                                                        'class' => 'control-label'
                                                    ],
                                                    'options' => ['tag' => false]
                                                ]
                                            )->textInput(['maxlength' => true]) ?>
                                        </div>
                                        <div class="col-md-6 col-12">
                                            <?= $form->field($model, 'password',  [
                                                'template' => '
                                                    {label}
                                                    {input}
                                                    {error}
                                                ',
                                                'inputOptions' => [
                                                    'class' => 'form-control'
                                                ],
                                                'labelOptions' => [
                                                    'class' => 'control-label'
                                                ],
                                                'options' => ['tag' => false]
                                            ])->passwordInput(['maxlength' => true, 'autocomplete' => "off"]) ?>
                                        </div>
                                        <div class="col-md-12 col-12">
                                            <?= $form->field(
                                                $model,
                                                'no_hp',
                                                [
                                                    'template' => '
                                                        {label}
                                                        {input}
                                                        {error}
                                                    ',
                                                    'inputOptions' => [
                                                        'class' => 'form-control'
                                                    ],
                                                    'labelOptions' => [
                                                        'class' => 'control-label'
                                                    ],
                                                    'options' => ['tag' => false]
                                                ]
                                            )->textInput(['maxlength' => true]) ?>
                                        </div>
                                        <div class="col-md-12 col-12">
                                            <?= $form->field($model, 'photo_url',  [
                                                'template' => '
                                                    {label}
                                                    {input}
                                                    {error}
                                                ',
                                                'inputOptions' => [
                                                    'class' => 'form-control'
                                                ],
                                                'labelOptions' => [
                                                    'class' => 'control-label'
                                                ],
                                                'options' => ['tag' => false]
                                            ])->fileInput([
                                                'options' => ['accept' => 'image/*'],
                                                'pluginOptions' => [
                                                    'allowedFileExtensions' => ['jpg', 'png', 'jpeg', 'gif', 'bmp'],
                                                    'maxFileSize' => 250,
                                                ],
                                            ]) ?>
                                            <?php
                                            if ($model->photo_url != null) {
                                            ?>
                                                <div class="form-group">
                                                    <div class="col-sm-6 col-sm-offset-3">
                                                        <?= Html::img(Yii::$app->formatter->asMyImage($model->photo_url, false, Constant::DEFAULT_IMAGE), ["class" => "img-fluid", "width" => "200px"]); ?>
                                                    </div>
                                                </div>
                                            <?php
                                            } else {
                                            ?>
                                                <div class="form-group">
                                                    <div class="col-sm-6 col-sm-offset-3">
                                                        <?= Html::img(Constant::DEFAULT_IMAGE, ["class" => "img-fluid", "width" => "200px"]); ?>
                                                    </div>
                                                </div>
                                            <?php
                                            }
                                            ?>
                                        </div>
                                    </div>

                                    <div class="clearfix"></div>
                                </div>
                                <hr />
                                <div class="row mb-2">
                                    <div class="col-12 text-center">
                                        <?= Html::submitButton('<i class="fa fa-save"></i> Simpan', ['class' => 'btn btn-success']); ?>
                                        <?= Html::a('<i class="fa fa-chevron-left"></i> Kembali', ['index'], ['class' => 'btn btn-default']) ?>
                                    </div>
                                </div>
                                <?php ActiveForm::end(); ?>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>
<!-- End Contact Content -->

<?php
$this->registerJsFile("@web/homepage/vendor/jquery-3.2.1.min.js", ['position' => \yii\web\View::POS_END]);
?>